(function(d){var n={sort:"price_desc",maxResults:250,criteria:{},itemsPerPageData:[5,10,15,20,25,30,35,40,45,50],sortOptionsData:[{value:"price_desc",label:"Descending by Price"},{value:"price",label:"Ascending by Price"}]},m=function(c){(this.is(".wolfnet_propertyList")||this.is(".wolfnet_listingGrid"))&&this.find(".wolfnet_listings").children().remove();if(this.is(".wolfnet_propertyList")){for(var a=c,a=d.isArray(a.responseData.data.listing)?a.responseData.data.listing:[],f=d("<div>").addClass("wolfnet_listings"),
b=0,h=a.length;b<h;b++){var g=a[b].display_address+", "+(a[b].city+", "+a[b].state),e=d("<div>").attr("id","wolfnet_listing_"+a[b].property_id).addClass("wolfnet_listing").appendTo(f),e=d("<a>").attr({href:a[b].property_url,title:g}).appendTo(e);d("<span>").addClass("wolfnet_price").attr("itemprop","price").html(a[b].listing_price.toString()).appendTo(e);d("<span>").addClass("wolfnet_full_address").attr("itemprop","street-address").html(g).appendTo(e)}this.find(".wolfnet_listings").replaceWith(f)}else if(this.is(".wolfnet_listingGrid")){a=
c;a=d.isArray(a.responseData.data.listing)?a.responseData.data.listing:[];f=d("<div>").addClass("wolfnet_listings");b=0;for(h=a.length;b<h;b++){var g=a[b].branding.type||"",e=a[b].city+", "+a[b].state,i=a[b].display_address+", "+e,j=d("<div>").addClass("wolfnet_listing").attr("id","wolfnet_listing_"+a[b].property_id).appendTo(f),j=d("<a>").attr("href",a[b].property_url).appendTo(j),k=d("<span>").addClass("wolfnet_listingImage").appendTo(j);d("<img>").attr("src",a[b].thumbnail_url).appendTo(k);d("<span>").addClass("wolfnet_price").attr("itemprop",
"price").html(a[b].listing_price.toString()).appendTo(j);k=0;""!==a[b].total_partial_baths&&(k+=parseInt(a[b].total_partial_baths));""!==a[b].total_full_baths&&(k+=parseInt(a[b].total_full_baths));var l=d("<span>").addClass("wolfnet_bed_bath").attr("title",a[b].total_bedrooms+" Bedrooms & "+k+" Bathrooms").appendTo(j);""!==a[b].total_bedrooms&&l.append(a[b].total_bedrooms+"bd");0<k&&(""!==l.text()&&l.append("/"),l.append(k+"ba"));j=d("<span>").attr("title",i).appendTo(j);d("<span>").addClass("wolfnet_address").html(a[b].display_address).appendTo(j);
d("<span>").addClass("wolfnet_location").attr("itemprop","locality").html(e).appendTo(j);d("<span>").addClass("wolfnet_full_address").attr("itemprop","street_address").css("display","none").html(i).appendTo(j);e=d("<div>").addClass("wolfnet_branding").insertAfter(j);""!==a[b].branding.logo&&(i=d("<span>").addClass("wolfnet_brokerLogo").append(d("<img>").attr("src",a[b].branding.logo)).appendTo(e),"idx"==g&&i.addClass("wolfnet_idxLogo"));g=d("<span>").addClass("wolfnet_brandingMessage").appendTo(e);
""!==a[b].branding.courtesy_text&&d("<span>").text(a[b].branding.courtesy_text).addClass("wolfnet_brandingCourtesyText").appendTo(g);""!==a[b].branding.agent_name&&d("<span>").text(a[b].branding.agent_name).addClass("wolfnet_brandingAgent").addClass("wolfnet_brandingAgentName").appendTo(g);""!==a[b].branding.agent_phone&&d("<span>").text(a[b].branding.agent_phone).addClass("wolfnet_brandingAgent").addClass("wolfnet_brandingAgentPhone").appendTo(g);""!==a[b].branding.office_name&&d("<span>").text(a[b].branding.office_name).addClass("wolfnet_brandingOffice").addClass("wolfnet_brandingOfficeName").appendTo(g);
""!==a[b].branding.office_phone&&d("<span>").text(a[b].branding.office_phone).addClass("wolfnet_brandingOffice").addClass("wolfnet_brandingOfficePhone").appendTo(g);""!==a[b].branding.toll_free_phone&&d("<span>").text(a[b].branding.toll_free_phone).addClass("wolfnet_brandingTollFreePhone").appendTo(g)}this.find(".wolfnet_listings").replaceWith(f);this.wolfnetListingGrid("refresh")}if(0<this.find(".wolfnet_wntMainMap").length){c=d.isArray(c.responseData.data.listing)?c.responseData.data.listing:[];
a=this.find(".wolfnet_wntMainMap").data("map");f=wolfnet_ajax.houseoverIcon;a.removeAllShapes();b=0;for(h=c.length;b<h;b++)g=c[b],e="",e+='<a style="display:block" rel="follow" href="'+g.property_url+'">',e+='<div class="wolfnet_wntHouseOverWrapper"><div data-property-id="'+g.property_id,e+='" class="wntHOItem"><table class="wolfnet_wntHOTable"><tbody><tr>',e+='<td class="wntHOImgCol" valign="top" style="vertical-align:top;"><div class="wolfnet_wntHOImg">',e+='<img src="'+g.thumbnail_url+'" style="max-height:100px;width:auto"></div><div class="wolfnet_wntHOBroker" style="text-align: center">',
e+='<img class="wolfnet_wntHOBrokerLogo" src="'+g.branding.logo+'" style="max-height:50px;width:auto" alt="Broker Reciprocity">',e+='</div></td><td valign="top" style="vertical-align:top;"><div class="wolfnet_wntHOContentContainer">',e+='<div style="text-align:left;font-weight:bold">'+g.listing_price.toString()+"</div>",e+='<div style="text-align:left;">'+g.display_address+'</div><div style="text-align:left;">',e+=g.city+", "+g.state+'</div><div style="text-align:left;">'+g.bedsbaths,e+='</div><div style="text-align:left;padding-top:20px;">'+
g.branding.courtesy_text+"</div>",houseoverHtml=e+="</div></td></tr></tbody></table></div></div></a>",g=a.mapIcon(f,20,20),g=a.poi(c[b].geo.lat,c[b].geo.lng,g,houseoverHtml,c[b].property_id,c[b].property_url),a.addPoi(g);a.bestFit()}this.trigger("wolfnet.updated")},o=function(){var c=d(this),a=c.find("span.wolfnet_page_items_select"),f=c.data("wolfnetToolbar.state"),b=c.data("wolfnetToolbar.options");if(0===a.length&&c.is(".wolfnet_withPagination")){var h=d("<select>");h.change(function(){f.numrows=
d(this).val();c.data("wolfnetToolbar.state",f);c.find("span.wolfnet_page_items_select select").val(f.numrows);i.update.call(c)});for(var a=0,g=b.itemsPerPageData.length;a<g;a++){var e=b.itemsPerPageData[a];d("<option>").attr("value",e).text(e).appendTo(h)}a=d("<span>").addClass("wolfnet_page_items_select");a.append(h).append("per page");a.appendTo(c.find(".wolfnet_toolbar .wolfnet_page_items"))}c.find("span.wolfnet_page_items_select select").each(function(){d(this).val(Number(f.numrows))})},p=function(){var c=
d(this),a=c.find("span.wolfnet_sortoptions select"),f=c.data("wolfnetToolbar.state"),b=c.data("wolfnetToolbar.options");if(0===a.length&&c.is(".wolfnet_withSortOptions")){var h=d("<select>");h.change(function(){f.sort=d(this).val();c.data("wolfnetToolbar.state",f);c.find("span.wolfnet_sortoptions select").val(f.sort);i.update.call(c)});for(var a=0,g=b.sortOptionsData.length;a<g;a++){var e=b.sortOptionsData[a];d("<option>").text(e.label).attr("value",e.value).appendTo(h)}a=d("<span>").addClass("wolfnet_sortoptions");
a.append(h);a.appendTo(c.find(".wolfnet_toolbar .wolfnet_page_info"))}c.find("span.wolfnet_sortoptions select").each(function(){d(this).val(f.sort)})},q=function(){var c=d(this),a=c.find("a.wolfnet_page_nav_next"),f=c.find("a.wolfnet_page_nav_prev"),b=c.data("wolfnetToolbar.state"),h=c.data("wolfnetToolbar.options"),g=Math.ceil(h.maxResults/b.numrows);1>=b.page?f.addClass("wolfnet_disabled"):f.removeClass("wolfnet_disabled");b.page>=g?a.addClass("wolfnet_disabled"):a.removeClass("wolfnet_disabled");
a=Number(b.startrow)-1+Number(b.numrows);Number(h.maxResults)<a&&(a=Number(h.maxResults));c.find(".wolfnet_page_start").text(b.startrow);c.find(".wolfnet_page_end").text(a);d("html,body").scrollTop(c.closest(".wolfnet_widget").offset().top-100);c.is(".wolfnet_listingGrid")&&c.wolfnetListingGrid&&c.wolfnetListingGrid("refresh",!0);c.removeClass("wolfnet_refreshing");return!0},i={init:function(c){return this.each(function(){var a=d(this),f=d.extend(!0,{},n,c),b=d.extend(!0,{},f.criteria,f,{page:1});
delete f.criteria;delete b.criteria;delete b.prices;delete b.ownertypes;delete b.savedsearches;for(var h in b){var g=-1!==h.indexOf("_wpname"),e=-1!==h.indexOf("_wpid"),m=-1!==h.indexOf("_wpc"),j=-1!==h.indexOf("_wps");(g||e||m||j)&&delete b[h]}b.maxresults=f.maxResults;-1===d.inArray(Number(b.numrows),f.itemsPerPageData)&&f.itemsPerPageData.push(Number(b.numrows));f.itemsPerPageData.sort(function(a,b){return a-b});a.data("wolfnetToolbar.options",f);a.data("wolfnetToolbar.state",b);o.call(a);p.call(a);
a.click(function(b){var c=d(b.target);return c.is("a.wolfnet_page_nav_next")||c.parent().is("a.wolfnet_page_nav_next")?(b.preventDefault(),i.next.call(a),!1):c.is("a.wolfnet_page_nav_prev")||c.parent().is("a.wolfnet_page_nav_prev")?(b.preventDefault(),i.prev.call(a),!1):!0});a.on("wolfnet.updated",q)})},update:function(){return this.each(function(){var c=d(this),a=c.data("wolfnetToolbar.state");d.ajax({url:wolfnet_ajax.ajaxurl,dataType:"jsonp",data:function(){var c=d.extend(a,{});delete c.itemsPerPageData;
delete c.sortOptionsData;return d.extend(a,{action:"wolfnet_get_listings"})}(),beforeSend:function(){c.addClass("wolfnet_refreshing")}}).done(function(a){m.call(c,a)}).fail(function(){c.removeClass("wolfnet_refreshing")}).always(function(){})})},next:function(){return this.each(function(){var c=d(this),a=c.data("wolfnetToolbar.state").page+1;i.page.call(c,a)})},prev:function(){return this.each(function(){var c=d(this),a=c.data("wolfnetToolbar.state").page-1;i.page.call(c,a)})},page:function(c){return this.each(function(){var a=
d(this),f=a.data("wolfnetToolbar.options"),b=a.data("wolfnetToolbar.state"),f=Math.ceil(f.maxResults/Number(b.numrows)),h=c;1>h?h=f:h>f&&(h=1);a.data("wolfnetToolbar.state",d.extend(b,{page:h,startrow:(h-1)*Number(b.numrows)+1}));i.update.call(a)})}};d.fn.wolfnetToolbar=function(c){if(i[c])return i[c].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof c||!c)return i.init.apply(this,arguments);d.error("Method "+c+" does not exist on jQuery."+pluginName)}})(jQuery);
